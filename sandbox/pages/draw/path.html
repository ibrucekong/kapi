<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Draw Polyline - KAPI</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimal-ui">
  <meta name="description" content="KAPI"/>
  <link rel='stylesheet' href='./css/index.css'>
  <style type='text/css'>
    #kapi-container {
      width: 100%;
      height: 60%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .operation-range {
      width: 100%;
      height: 40%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
  </style>
</head>
<body onload='init()'>
<div class='container'>
  <div id='kapi-container'></div>
  <div class='operation-range'>
    <div class='row'>
      <div class='btn' onclick='draw()'>绘制路径线</div>
      <div class='btn' onclick='clearPath()'>删除路径线</div>
    </div>
  </div>
</div>
<pre id='console-log'><code id='logs'></code></pre>
<script src="./config.js"></script>
<script src="js/jquery-1.8.3.min.js"></script>
<link href="js/highlight/intellij-light.min.css" rel="stylesheet">
<script src="js/highlight/highlight.min.js"></script>
<script src="./js/kapi.js"></script>
<script>
  let drawInstance

  async function init() {
    let kapi = await KAPI.build(config.token)

    // 设置参数
    let options = {
      server,                                                    // 服务地址
      netStats: false,                                           // 是否显示网络信息
      fullscreen: true                                          // 是否要全屏
    }
    // 初始化场景
    let scene = new kapi.Scene('kapi-container', options)

    // 等待场景响应好
    let readyStat = await scene.ready()
    printLog(readyStat)
    if (readyStat.code !== 200) return

    drawInstance = new kapi.Draw()
  }

  function draw() {
    let path = [
      {x: 511127.625, y: 4056989, z: 84.9941177368164},
      {x: 511109.8125, y: 4057004.75, z: 84.99378967285156},
      {x: 511086.3125, y: 4057023.5, z: 84.84740447998047},
      {x: 511063.96875, y: 4057043.5, z: 84.72782135009766},
      {x: 511038.71875, y: 4057059, z: 85.03816223144531},
      {x: 511009.71875, y: 4057067, z: 85.2235336303711},
      {x: 510980.5625, y: 4057074, z: 85.26409149169922},
      {x: 510950.8125, y: 4057077, z: 85.19207000732422},
      {x: 510920.84375, y: 4057076, z: 85.163818359375},
      {x: 510891.15625, y: 4057080.25, z: 85.2052993774414},
      {x: 510862.3125, y: 4057088.5, z: 85.24292755126953},
      {x: 510835.96875, y: 4057102.5, z: 85.2538833618164},
      {x: 510814.8125, y: 4057123.75, z: 85.24312591552734},
      {x: 510797.65625, y: 4057148.25, z: 85.23637390136719},
      {x: 510783.0625, y: 4057174.5, z: 85.17872619628906},
      {x: 510770.625, y: 4057201.75, z: 85.15482330322266},
      {x: 510746.53125, y: 4057219.5, z: 85.19757843017578},
      {x: 510728.3125, y: 4057242.25, z: 85.26732635498047},
      {x: 510730.65625, y: 4057271.25, z: 85.31396484375},
      {x: 510731.84375, y: 4057299.5, z: 85.32377624511719},
      {x: 510743.1875, y: 4057327, z: 85.2651138305664},
      {x: 510746.21875, y: 4057357, z: 85.25474548339844},
      {x: 510748.5625, y: 4057386.75, z: 85.24759674072266},
      {x: 510747.78125, y: 4057416.75, z: 85.23688507080078},
      {x: 510745.84375, y: 4057446.75, z: 85.22669219970703},
      {x: 510748.5, y: 4057476.5, z: 85.21903228759766},
      {x: 510739.125, y: 4057504.25, z: 85.37450408935547},
      {x: 510731.65625, y: 4057534, z: 85.42894744873047},
      {x: 510736.90625, y: 4057564.25, z: 85.50792694091797},
      {x: 510753.90625, y: 4057589.25, z: 85.56240844726562},
      {x: 510777.46875, y: 4057609, z: 85.6243667602539},
      {x: 510806.5, y: 4057618.5, z: 85.64679718017578},
      {x: 510836.40625, y: 4057618.75, z: 85.63428497314453},
      {x: 510867.65625, y: 4057619, z: 85.66419982910156},
      {x: 510894.96875, y: 4057607.5, z: 85.66899108886719},
      {x: 510920.9375, y: 4057593, z: 85.63653564453125},
      {x: 510948.6875, y: 4057583, z: 85.61359405517578},
      {x: 510961.625, y: 4057556.25, z: 85.6142807006836},
      {x: 510973.09375, y: 4057528.5, z: 85.58795166015625},
      {x: 510996.03125, y: 4057510.75, z: 85.60346984863281},
      {x: 511021.4375, y: 4057494.5, z: 85.61355590820312},
      {x: 511045.75, y: 4057476.5, z: 85.6224594116211},
      {x: 511065.75, y: 4057454, z: 85.63274383544922},
      {x: 511084, y: 4057429.75, z: 85.6216812133789},
      {x: 511096.875, y: 4057402.25, z: 85.3641128540039},
      {x: 511105, y: 4057373.25, z: 84.76004028320312},
      {x: 511111.4375, y: 4057344, z: 85.26332092285156},
      {x: 511096.15625, y: 4057319.25, z: 85.38578796386719},
      {x: 511080.0625, y: 4057294, z: 85.33792877197266},
      {x: 511069.3125, y: 4057266, z: 85.31477355957031},
      {x: 511062.15625, y: 4057236.75, z: 85.30921173095703},
      {x: 511054.09375, y: 4057208, z: 85.3141860961914},
      {x: 511042.75, y: 4057180.25, z: 85.26261901855469},
      {x: 511025.8125, y: 4057155.5, z: 85.20573425292969},
      {x: 511009.875, y: 4057130.25, z: 85.2134780883789},
      {x: 510998.90625, y: 4057102.25, z: 85.1377182006836},
      {x: 510987.3125, y: 4057074.75, z: 85.1377182006836},
      {x: 510976.34375, y: 4057046.75, z: 85.09729766845703},
      {x: 510967.71875, y: 4057018, z: 85.02019500732422},
      {x: 510964.96875, y: 4056988.25, z: 84.85092163085938},
      {x: 510964.4375, y: 4056958.25, z: 84.73200225830078},
      {x: 510965.75, y: 4056928.25, z: 84.6452407836914},
      {x: 510962.6875, y: 4056898.5, z: 84.66511535644531},
      {x: 510957.21875, y: 4056869, z: 84.66980743408203},
      {x: 510933.6875, y: 4056852, z: 84.71333312988281},
      {x: 510909.09375, y: 4056837, z: 84.70968627929688},
      {x: 510896.03125, y: 4056809.75, z: 84.71106719970703},
      {x: 510879.3125, y: 4056784.5, z: 84.74524688720703},
      {x: 510859.84375, y: 4056761.75, z: 85.0248794555664},
      {x: 510840.46875, y: 4056738.5, z: 85.09558868408203},
      {x: 510818.03125, y: 4056717.75, z: 85.3733901977539},
      {x: 510791.71875, y: 4056703.25, z: 85.40097045898438},
      {x: 510764.78125, y: 4056689.75, z: 85.32743072509766},
      {x: 510737.03125, y: 4056678.25, z: 85.2900390625},
      {x: 510708.96875, y: 4056666.75, z: 85.28289794921875},
      {x: 510679.40625, y: 4056660.5, z: 85.2535629272461},
      {x: 510648.5625, y: 4056663.75, z: 85.3064193725586},
      {x: 510627.75, y: 4056685.25, z: 85.28543853759766},
      {x: 510634.6875, y: 4056713.75, z: 85.28901672363281},
      {x: 510660.0625, y: 4056728.75, z: 85.27262878417969},
      {x: 510687.5, y: 4056741, z: 85.2418441772461},
      {x: 510714.65625, y: 4056754, z: 85.1598892211914},
      {x: 510741.1875, y: 4056768, z: 85.11492919921875},
      {x: 510767.25, y: 4056783, z: 85.08615112304688},
      {x: 510792.96875, y: 4056798.75, z: 85.0497817993164},
      {x: 510817.53125, y: 4056816.25, z: 84.99652099609375},
      {x: 510841, y: 4056835.25, z: 84.96713256835938},
      {x: 510863.21875, y: 4056855.25, z: 84.96037292480469},
      {x: 510876.0625, y: 4056878.75, z: 84.9253921508789},
      {x: 510875.96875, y: 4056882.5, z: 84.9253921508789}]
    let options = {
      isGraphic: false,
      id: '1001'
    }
    drawInstance.drawPath(path, options)
  }

  async function clearPath() {
    let removeInfo = await drawInstance.removePath('1001')
    printLog(removeInfo)
  }
</script>
</body>
</html>
